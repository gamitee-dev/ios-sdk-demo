{"schemaVersion":{"major":0,"patch":0,"minor":3},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/joynedmobilesdk\/offering"]},{"paths":["\/documentation\/joynedmobilesdk\/offering"],"traits":[{"interfaceLanguage":"occ"}]}],"abstract":[{"type":"text","text":"API for interacting with JoynedMobileSDK offerings"}],"hierarchy":{"paths":[["doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK","doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/GettingStarted"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/offering"},"sections":[],"kind":"article","seeAlsoSections":[{"title":"Offering Related API","generated":true,"identifiers":["doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingRequest","doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingResponse"]}],"metadata":{"roleHeading":"Article","title":"Offering handling API","modules":[{"name":"JoynedMobileSDK"}],"role":"article"},"primaryContentSections":[{"content":[{"anchor":"Overview","text":"Overview","type":"heading","level":2},{"inlineContent":[{"text":"Joyned supports displaying diffrent offerings based on the application’s category it can be anything from an e-comerce product, to a hotel booking (this is why we use the term Offering)","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Joyned mobile sdk allows its integrator to interact with offerings in two seperate ways:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"adding offerings to the system"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"responding to user click on existing offerings in the Joyned UI"}]}]}]},{"type":"tabNavigator","tabs":[{"title":"Add offering","content":[{"anchor":"Adding-a-new-Offering","text":"Adding a new Offering","level":3,"type":"heading"},{"numberOfColumns":4,"columns":[{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"screenshot_mobile_invitation_01.png"}]}],"size":1},{"size":3,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Joyned supports adding a new Offering only via the hosted UI."}]},{"inlineContent":[{"text":"Once a user taps on the relevent button the mobile SDK asks its host application for the offering information via a delegation protocol and processes it accordingly.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"The delegation protocol in question is the ","type":"text"},{"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedButtonDelegate","isActive":true,"type":"reference"},{"type":"text","text":" you will need to"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The button delegate protocol covers three diffrent situations :"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Standalone"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Table \/ Collection view"}]}]}],"type":"unorderedList"}]}],"type":"row"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Standalone example:","type":"text"}]}]},{"syntax":"swift","code":["import Foundation","import UIKit","","import JoynedMobileSDK","","class StandaloneViewController : UIViewController","{","    \/\/ MARK: - Properties","    internal var joynedButton : JoynedButton! {","        didSet { joynedButton.delegate = self }","    }","    internal var venue : Venue!","","    \/\/ MARK: - View LifeCycle","    override func viewDidLoad()","    {","        super.viewDidLoad()","        ","        joynedButton = JoynedSDK.generateJoynedButton(frame: CGRect(x: 100, y: 500, width: 70, height: 34), with: self)","        view.addSubview(button)","    }","}","extension StandaloneViewController : JoynedButtonDelegate","{","    func willPresentMobileSDKContent()","    {","        logger.debug()","    }","    ","    func joynedButton(_ button: JoynedButton, productOfferingFor location: CGPoint) -> JoynedOfferingRequest?","    {","        logger.debug()","        return encode(product: venue)","    }","    ","    private func encode(product item: Venue?) -> JoynedOfferingRequest?","    {","        guard let venue   = item              else { return nil }","        guard let product = venue.toPayload() else { return nil }","        guard let extra   = venue.toJSON()    else { return nil }","        return JoynedOfferingRequest(offeringString: product, extraString: extra)","    }","}"],"type":"codeListing"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Table \/ Collection example:"}]}],"type":"paragraph"},{"syntax":"swift","code":["import Foundation","import UIKit","","import JoynedMobileSDK","","class GroupViewController : UIViewController","{","    \/\/ MARK: - type - enum","    struct Constants","    {","        struct Identifier","        {","            private init() {}","        }","        private init() {}","    }","    ","    \/\/ MARK: - Properties","    private var selectedItem : Venue?","    ","    \/\/ MARK: - Properties","    private var dataSource : UICollectionViewDiffableDataSource<Int, Venue>!","    ","    \/\/ MARK: - @IBOutlet","    @IBOutlet      var  logoImageView : UIImageView!","    @IBOutlet weak var collectionView : UICollectionView! {","        didSet {","            collectionView.delegate = self","        }","    }","    ","    \/\/ MARK: - View LifeCycle","    override func viewDidLoad()","    {","        super.viewDidLoad()","        \/\/ Do any additional setup after loading the view.","        ","        title = String()","        navigationItem.titleView = logoImageView","        navigationItem.setHidesBackButton(true, animated: false)","        ","        registerVisualElements()","        configureVisualElements()","    }","}","\/\/ MARK: - Constants","fileprivate extension GroupViewController.Constants.Identifier","{","    static var   cell : String { \"DealsFeedCellIdentifier\"   }","    static var header : String { \"DealsFeedHeaderIdentifier\" }","    static var global : String { \"SearchHeaderIdentifier\"    }","}","\/\/ MARK: - Collection View setup","fileprivate extension GroupViewController","{","    private func registerVisualElements()","    {","        collectionView.register(ProductCollectionViewCell.classNib, forCellWithReuseIdentifier: Constants.Identifier.cell)","        collectionView.register(SearchHeaderView.classNib         , forSupplementaryViewOfKind: Constants.Identifier.global, withReuseIdentifier: Constants.Identifier.global)","    }","    private func configureVisualElements()","    {","        ","        dataSource = UICollectionViewDiffableDataSource<Int, Venue>(collectionView: collectionView) { (collectionView, indexPath, item) -> UICollectionViewCell? in","            ","            let cell = collectionView.dequeueReusableCell(withReuseIdentifier: Constants.Identifier.cell, for: indexPath)","            ","            if let cell = cell as? ProductCollectionViewCell","            {","                cell.titleLabel.text        = item.productTitle","                cell.datesLabel.text        = \"\\(item.productDates.checkin) - \\(item.productDates.checkout)\"","                cell.descriptionLabel.text  = item.productDescription","                cell.locationLabel.text     = nil","                cell.priceLabel.text        = \"\\(item.productPrice.amount) \\(item.productPrice.currency)\"","                cell.imageView.image        = UIImage(named: item.productThumbnail)","                cell.joynedButton.delegate  = self","            }","            ","            return cell","        }","        dataSource?.supplementaryViewProvider = { (collectionView,kind,indexPath) -> UICollectionReusableView? in","            ","            guard kind == Constants.Identifier.global else { return nil }","            return collectionView.dequeueReusableSupplementaryView(","                ofKind: kind,","                withReuseIdentifier: Constants.Identifier.global,","                for: indexPath","            )","        }","    }","}","extension GroupViewController : JoynedButtonDelegate","{","    func willPresentMobileSDKContent()","    {","        logger.debug()","    }","    ","    func joynedButton(_ button: JoynedButton, productOfferingForItem indexPath: IndexPath) -> JoynedOfferingRequest?","    {","        return encode(product: dataSource.itemIdentifier(for: indexPath))","    }","    ","    private func encode(product item: Venue?) -> JoynedOfferingRequest?","    {","        guard let venue   = item              else { return nil }","        guard let product = venue.toPayload() else { return nil }","        guard let extra   = venue.toJSON()    else { return nil }","        \/\/ let extra: [String: Any] = [","        \/\/     \"itemLink\": \"https:\/\/voyage.joyned.app\/product\/1\",","        \/\/ ]","        return JoynedOfferingRequest(offeringString: product, extraString: extra)","    }","}",""],"type":"codeListing"}]},{"title":"Respond to offering","content":[{"type":"heading","level":3,"text":"In-App navigation in response to user action","anchor":"In-App-navigation-in-response-to-user-action"},{"type":"paragraph","inlineContent":[{"text":"To support in-app navigation ","type":"text"},{"inlineContent":[{"text":"Joyned mobile sdk","type":"text"}],"type":"strong"},{"type":"text","text":"  exposes a delegation method via its public accessd class."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When user taps on an offering within the floating container the system extracts it’s data , wrapps it into a rsponse object and calls on its delegate object with the "},{"isActive":true,"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate\/mobileSDKDidTriggerNavigation(for:)","type":"reference"},{"text":".","type":"text"}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Note:"}],"type":"strong"},{"type":"text","text":""},{"text":" ","type":"text"},{"type":"text","text":"This is the only required method in the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate"},{"type":"text","text":" protocol."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"In-app navigation example:"}]}]},{"code":["func mobileSDKDidTriggerNavigation(for navigationPayload: JoynedMobileSDK.JoynedOfferingResponse)","{","    logger.debug()","    guard let targetUrl = navigationPayload.directUrl      else { return }","    guard let keyWindow = UIApplication.shared.v_keyWindow else { return }","    ","    if let topVC = keyWindow.v_topViewController {","        topVC.tabBarController?.selectedIndex = 0","    }","    ","    if let topVC = keyWindow.v_topViewController {","        topVC.navigationController?.popToRootViewController(animated: true)","    }","    ","    guard let vc = keyWindow.v_topViewController             else { return }","    guard let dealsVC = vc as? DealsFeedViewController       else { return }","    guard let item = DataService.shared.item(for: targetUrl) else { return }","    ","    dealsVC.present(selected: item)","    ","    JoynedSDK.minimizeDisplay()","}"],"type":"codeListing","syntax":"swift"}]}]}],"kind":"content"}],"references":{"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedOfferingRequest":{"type":"topic","kind":"symbol","navigatorTitle":[{"text":"JoynedOfferingRequest","kind":"identifier"}],"abstract":[],"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"JoynedOfferingRequest","kind":"identifier"}],"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingRequest","title":"JoynedOfferingRequest","url":"\/documentation\/joynedmobilesdk\/joynedofferingrequest","role":"symbol"},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK":{"url":"\/documentation\/joynedmobilesdk","title":"JoynedMobileSDK","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK","type":"topic","abstract":[{"text":"We help people book together. With a better booking experience, better business results","type":"text"}],"kind":"symbol","role":"collection"},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/GettingStarted":{"url":"\/documentation\/joynedmobilesdk\/gettingstarted","title":"Getting Started with Joyned mobile SDK","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/GettingStarted","type":"topic","abstract":[],"kind":"article","role":"collectionGroup"},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedButtonDelegate":{"abstract":[],"title":"JoynedButtonDelegate","url":"\/documentation\/joynedmobilesdk\/joynedbuttondelegate","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedButtonDelegate","kind":"symbol","type":"topic","role":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"text":"JoynedButtonDelegate","kind":"identifier"}],"navigatorTitle":[{"text":"JoynedButtonDelegate","kind":"identifier"}]},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedSDKDelegate":{"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"JoynedSDKDelegate"}],"title":"JoynedSDKDelegate","url":"\/documentation\/joynedmobilesdk\/joynedsdkdelegate","abstract":[{"type":"text","text":"Implement this to recive notifications on major actions taken by the SDK and affect its behavior"}],"role":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"JoynedSDKDelegate","kind":"identifier"}],"type":"topic"},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedSDKDelegate/mobileSDKDidTriggerNavigation(for:)":{"kind":"symbol","title":"mobileSDKDidTriggerNavigation(for:)","url":"\/documentation\/joynedmobilesdk\/joynedsdkdelegate\/mobilesdkdidtriggernavigation(for:)","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"mobileSDKDidTriggerNavigation","kind":"identifier"},{"kind":"text","text":"("},{"text":"for","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"JoynedOfferingResponse","preciseIdentifier":"c:@M@JoynedMobileSDK@objc(cs)JoynedOfferingResponse","kind":"typeIdentifier"},{"text":")","kind":"text"}],"navigatorTitle":[{"text":"mobileSDKDidTriggerNavigationFor:","kind":"identifier"}],"type":"topic","abstract":[{"type":"text","text":"Called when a user clicks on an offering within the Joyned UI, use this as a trigger for in-app navigation, for navigation details lokk into the payload object"}],"required":true,"role":"symbol","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate\/mobileSDKDidTriggerNavigation(for:)"},"screenshot_mobile_invitation_01.png":{"identifier":"screenshot_mobile_invitation_01.png","type":"image","variants":[{"url":"\/images\/screenshot_mobile_invitation_01.png","traits":["1x","light"]}],"alt":"Joyned invitation mobile example 01"},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedOfferingResponse":{"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingResponse","kind":"symbol","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"JoynedOfferingResponse"}],"url":"\/documentation\/joynedmobilesdk\/joynedofferingresponse","type":"topic","abstract":[],"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"JoynedOfferingResponse"}],"title":"JoynedOfferingResponse"}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"value":"occ","op":"replace","path":"\/identifier\/interfaceLanguage"},{"path":"\/topicSections","op":"add","value":null},{"op":"replace","value":[{"identifiers":["doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingRequest","doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingResponse"],"generated":true,"title":"Offering Related API"}],"path":"\/seeAlsoSections"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingRequest\/title","value":"JoynedOfferingRequest","op":"replace"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingRequest\/fragments","op":"replace","value":[{"text":"JoynedOfferingRequest","kind":"identifier"}]},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedButtonDelegate\/title","value":"JoynedButtonDelegate","op":"replace"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedButtonDelegate\/fragments","value":[{"text":"JoynedButtonDelegate","kind":"identifier"}],"op":"replace"},{"value":"JoynedSDKDelegate","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate\/title","op":"replace"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate\/fragments","value":[{"kind":"identifier","text":"JoynedSDKDelegate"}],"op":"replace"},{"op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate~1mobileSDKDidTriggerNavigation(for:)\/title","value":"mobileSDKDidTriggerNavigationFor:"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate~1mobileSDKDidTriggerNavigation(for:)\/fragments","op":"replace","value":[{"text":"- ","kind":"text"},{"text":"mobileSDKDidTriggerNavigationFor:","kind":"identifier"}]},{"value":"JoynedOfferingResponse","op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingResponse\/title"},{"op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingResponse\/fragments","value":[{"text":"JoynedOfferingResponse","kind":"identifier"}]}]}]}