{"sections":[],"primaryContentSections":[{"kind":"content","content":[{"type":"heading","level":2,"text":"Overview","anchor":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Joyned supports displaying diffrent offerings based on the application’s category it can be anything from an e-comerce product, to a hotel booking (this is why we use the term Offering)"}]},{"type":"paragraph","inlineContent":[{"text":"Joyned mobile sdk allows its integrator to interact with offerings in two seperate ways:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"adding offerings to the system","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"responding to user click on existing offerings in the Joyned UI","type":"text"}]}]}]},{"tabs":[{"title":"Add offering","content":[{"level":3,"text":"Adding a new Offering","type":"heading","anchor":"Adding-a-new-Offering"},{"columns":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"screenshot_mobile_invitation_01.png","type":"image"}]}],"size":1},{"content":[{"inlineContent":[{"type":"text","text":"Joyned supports adding a new Offering only via the hosted UI."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Once a user taps on the relevent button the mobile SDK asks its host application for the offering information via a delegation protocol and processes it accordingly."}]},{"type":"paragraph","inlineContent":[{"text":"The delegation protocol in question is the ","type":"text"},{"isActive":true,"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedButtonDelegate","type":"reference"},{"type":"text","text":" you will need to"}]},{"type":"paragraph","inlineContent":[{"text":"The button delegate protocol covers three diffrent situations :","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Standalone","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Table \/ Collection view","type":"text"}]}]}]}],"size":3}],"type":"row","numberOfColumns":4},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Standalone example:","type":"text"}]}]},{"type":"codeListing","code":["import Foundation","import UIKit","","import JoynedMobileSDK","","class StandaloneViewController : UIViewController","{","    \/\/ MARK: - Properties","    internal var joynedButton : JoynedButton! {","        didSet { joynedButton.delegate = self }","    }","    internal var venue : Venue!","","    \/\/ MARK: - View LifeCycle","    override func viewDidLoad()","    {","        super.viewDidLoad()","        ","        joynedButton = JoynedSDK.generateJoynedButton(frame: CGRect(x: 100, y: 500, width: 70, height: 34), with: self)","        view.addSubview(button)","    }","}","extension StandaloneViewController : JoynedButtonDelegate","{","    func willPresentMobileSDKContent()","    {","        logger.debug()","    }","    ","    func joynedButton(_ button: JoynedButton, productOfferingFor location: CGPoint) -> JoynedOfferingRequest?","    {","        logger.debug()","        return encode(product: venue)","    }","    ","    private func encode(product item: Venue?) -> JoynedOfferingRequest?","    {","        guard let venue   = item              else { return nil }","        guard let product = venue.toPayload() else { return nil }","        guard let extra   = venue.toJSON()    else { return nil }","        return JoynedOfferingRequest(offeringString: product, extraString: extra)","    }","}"],"syntax":"swift"},{"inlineContent":[{"inlineContent":[{"text":"Table \/ Collection example:","type":"text"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","code":["import Foundation","import UIKit","","import JoynedMobileSDK","","class GroupViewController : UIViewController","{","    \/\/ MARK: - type - enum","    struct Constants","    {","        struct Identifier","        {","            private init() {}","        }","        private init() {}","    }","    ","    \/\/ MARK: - Properties","    private var selectedItem : Venue?","    ","    \/\/ MARK: - Properties","    private var dataSource : UICollectionViewDiffableDataSource<Int, Venue>!","    ","    \/\/ MARK: - @IBOutlet","    @IBOutlet      var  logoImageView : UIImageView!","    @IBOutlet weak var collectionView : UICollectionView! {","        didSet {","            collectionView.delegate = self","        }","    }","    ","    \/\/ MARK: - View LifeCycle","    override func viewDidLoad()","    {","        super.viewDidLoad()","        \/\/ Do any additional setup after loading the view.","        ","        title = String()","        navigationItem.titleView = logoImageView","        navigationItem.setHidesBackButton(true, animated: false)","        ","        registerVisualElements()","        configureVisualElements()","    }","}","\/\/ MARK: - Constants","fileprivate extension GroupViewController.Constants.Identifier","{","    static var   cell : String { \"DealsFeedCellIdentifier\"   }","    static var header : String { \"DealsFeedHeaderIdentifier\" }","    static var global : String { \"SearchHeaderIdentifier\"    }","}","\/\/ MARK: - Collection View setup","fileprivate extension GroupViewController","{","    private func registerVisualElements()","    {","        collectionView.register(ProductCollectionViewCell.classNib, forCellWithReuseIdentifier: Constants.Identifier.cell)","        collectionView.register(SearchHeaderView.classNib         , forSupplementaryViewOfKind: Constants.Identifier.global, withReuseIdentifier: Constants.Identifier.global)","    }","    private func configureVisualElements()","    {","        ","        dataSource = UICollectionViewDiffableDataSource<Int, Venue>(collectionView: collectionView) { (collectionView, indexPath, item) -> UICollectionViewCell? in","            ","            let cell = collectionView.dequeueReusableCell(withReuseIdentifier: Constants.Identifier.cell, for: indexPath)","            ","            if let cell = cell as? ProductCollectionViewCell","            {","                cell.titleLabel.text        = item.productTitle","                cell.datesLabel.text        = \"\\(item.productDates.checkin) - \\(item.productDates.checkout)\"","                cell.descriptionLabel.text  = item.productDescription","                cell.locationLabel.text     = nil","                cell.priceLabel.text        = \"\\(item.productPrice.amount) \\(item.productPrice.currency)\"","                cell.imageView.image        = UIImage(named: item.productThumbnail)","                cell.joynedButton.delegate  = self","            }","            ","            return cell","        }","        dataSource?.supplementaryViewProvider = { (collectionView,kind,indexPath) -> UICollectionReusableView? in","            ","            guard kind == Constants.Identifier.global else { return nil }","            return collectionView.dequeueReusableSupplementaryView(","                ofKind: kind,","                withReuseIdentifier: Constants.Identifier.global,","                for: indexPath","            )","        }","    }","}","extension GroupViewController : JoynedButtonDelegate","{","    func willPresentMobileSDKContent()","    {","        logger.debug()","    }","    ","    func joynedButton(_ button: JoynedButton, productOfferingForItem indexPath: IndexPath) -> JoynedOfferingRequest?","    {","        return encode(product: dataSource.itemIdentifier(for: indexPath))","    }","    ","    private func encode(product item: Venue?) -> JoynedOfferingRequest?","    {","        guard let venue   = item              else { return nil }","        guard let product = venue.toPayload() else { return nil }","        guard let extra   = venue.toJSON()    else { return nil }","        \/\/ let extra: [String: Any] = [","        \/\/     \"itemLink\": \"https:\/\/voyage.joyned.app\/product\/1\",","        \/\/ ]","        return JoynedOfferingRequest(offeringString: product, extraString: extra)","    }","}",""],"type":"codeListing"}]},{"title":"Respond to offering","content":[{"level":3,"type":"heading","anchor":"In-App-navigation-in-response-to-user-action","text":"In-App navigation in response to user action"},{"inlineContent":[{"text":"To support in-app navigation ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Joyned mobile sdk"}]},{"type":"text","text":"  exposes a delegation method via its public accessd class."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"When user taps on an offering within the floating container the system extracts it’s data , wrapps it into a rsponse object and calls on its delegate object with the ","type":"text"},{"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate\/mobileSDKDidTriggerNavigation(for:)","type":"reference","isActive":true},{"text":".","type":"text"}]},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Note:"}],"type":"strong"},{"text":"","type":"text"},{"type":"text","text":" "},{"type":"text","text":"This is the only required method in the "},{"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate","type":"reference","isActive":true},{"text":" protocol.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"In-app navigation example:","type":"text"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["func mobileSDKDidTriggerNavigation(for navigationPayload: JoynedMobileSDK.JoynedOfferingResponse)","{","    logger.debug()","    guard let targetUrl = navigationPayload.directUrl      else { return }","    guard let keyWindow = UIApplication.shared.v_keyWindow else { return }","    ","    if let topVC = keyWindow.v_topViewController {","        topVC.tabBarController?.selectedIndex = 0","    }","    ","    if let topVC = keyWindow.v_topViewController {","        topVC.navigationController?.popToRootViewController(animated: true)","    }","    ","    guard let vc = keyWindow.v_topViewController             else { return }","    guard let dealsVC = vc as? DealsFeedViewController       else { return }","    guard let item = DataService.shared.item(for: targetUrl) else { return }","    ","    dealsVC.present(selected: item)","    ","    JoynedSDK.minimizeDisplay()","}"]}]}],"type":"tabNavigator"}]}],"hierarchy":{"paths":[["doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/GettingStarted"]]},"kind":"article","schemaVersion":{"patch":0,"minor":3,"major":0},"abstract":[{"type":"text","text":"API for interacting with JoynedMobileSDK offerings"}],"identifier":{"url":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/offering","interfaceLanguage":"swift"},"metadata":{"role":"article","roleHeading":"Article","title":"Offering handling API"},"seeAlsoSections":[{"identifiers":["doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingRequest","doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingResponse"],"title":"Offering Related API","generated":true}],"references":{"doc://co.joyned.mobile.JoynedMobileSDK/documentation/GettingStarted":{"kind":"article","role":"collection","url":"\/documentation\/gettingstarted","type":"topic","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/GettingStarted","title":"Getting Started with Joyned mobile SDK","abstract":[]},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedButtonDelegate":{"title":"JoynedButtonDelegate","url":"\/documentation\/joynedmobilesdk\/joynedbuttondelegate","fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"text":"JoynedButtonDelegate","kind":"identifier"}],"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedButtonDelegate","kind":"symbol","type":"topic","role":"symbol","navigatorTitle":[{"text":"JoynedButtonDelegate","kind":"identifier"}],"abstract":[]},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedSDKDelegate/mobileSDKDidTriggerNavigation(for:)":{"required":true,"url":"\/documentation\/joynedmobilesdk\/joynedsdkdelegate\/mobilesdkdidtriggernavigation(for:)","title":"mobileSDKDidTriggerNavigation(for:)","kind":"symbol","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"mobileSDKDidTriggerNavigationFor:"}],"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate\/mobileSDKDidTriggerNavigation(for:)","abstract":[{"type":"text","text":"Called when a user clicks on an offering within the Joyned UI, use this as a trigger for in-app navigation, for navigation details lokk into the payload object"}],"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"mobileSDKDidTriggerNavigation","kind":"identifier"},{"text":"(","kind":"text"},{"text":"for","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"c:@M@JoynedMobileSDK@objc(cs)JoynedOfferingResponse","text":"JoynedOfferingResponse"},{"kind":"text","text":")"}],"type":"topic"},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedOfferingRequest":{"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"text":"JoynedOfferingRequest","kind":"identifier"}],"kind":"symbol","navigatorTitle":[{"text":"JoynedOfferingRequest","kind":"identifier"}],"role":"symbol","abstract":[],"url":"\/documentation\/joynedmobilesdk\/joynedofferingrequest","type":"topic","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingRequest","title":"JoynedOfferingRequest"},"screenshot_mobile_invitation_01.png":{"alt":"Joyned invitation mobile example 01","variants":[{"traits":["1x","light"],"url":"\/images\/screenshot_mobile_invitation_01.png"}],"type":"image","identifier":"screenshot_mobile_invitation_01.png"},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedOfferingResponse":{"abstract":[],"type":"topic","role":"symbol","navigatorTitle":[{"text":"JoynedOfferingResponse","kind":"identifier"}],"title":"JoynedOfferingResponse","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingResponse","fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"JoynedOfferingResponse","kind":"identifier"}],"kind":"symbol","url":"\/documentation\/joynedmobilesdk\/joynedofferingresponse"},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedSDKDelegate":{"title":"JoynedSDKDelegate","url":"\/documentation\/joynedmobilesdk\/joynedsdkdelegate","fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"JoynedSDKDelegate"}],"navigatorTitle":[{"text":"JoynedSDKDelegate","kind":"identifier"}],"abstract":[{"text":"Implement this to recive notifications on major actions taken by the SDK and affect its behavior","type":"text"}],"type":"topic","role":"symbol","kind":"symbol","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate"}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedButtonDelegate\/title","value":"JoynedButtonDelegate","op":"replace"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedButtonDelegate\/fragments","value":[{"kind":"identifier","text":"JoynedButtonDelegate"}],"op":"replace"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate~1mobileSDKDidTriggerNavigation(for:)\/title","op":"replace","value":"mobileSDKDidTriggerNavigationFor:"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate~1mobileSDKDidTriggerNavigation(for:)\/fragments","op":"replace","value":[{"kind":"text","text":"- "},{"kind":"identifier","text":"mobileSDKDidTriggerNavigationFor:"}]},{"value":"JoynedOfferingRequest","op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingRequest\/title"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingRequest\/fragments","op":"replace","value":[{"kind":"identifier","text":"JoynedOfferingRequest"}]},{"op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingResponse\/title","value":"JoynedOfferingResponse"},{"value":[{"text":"JoynedOfferingResponse","kind":"identifier"}],"op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingResponse\/fragments"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate\/title","value":"JoynedSDKDelegate","op":"replace"},{"value":[{"kind":"identifier","text":"JoynedSDKDelegate"}],"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate\/fragments","op":"replace"}]}]}