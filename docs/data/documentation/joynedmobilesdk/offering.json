{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/offering"},"seeAlsoSections":[{"title":"Offering Related API","generated":true,"identifiers":["doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingRequest","doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingResponse"]}],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"text":"Overview","type":"heading"},{"inlineContent":[{"text":"Joyned supports displaying diffrent offerings based on the application’s category it can be anything from an e-comerce product, to a hotel booking (this is why we use the term Offering)","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"Joyned mobile sdk allows its integrator to interact with offerings in two seperate ways:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"adding offerings to the system"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"responding to user click on existing offerings in the Joyned UI","type":"text"}]}]}]},{"tabs":[{"content":[{"type":"heading","level":3,"anchor":"Adding-a-new-Offering","text":"Adding a new Offering"},{"numberOfColumns":4,"columns":[{"size":1,"content":[{"inlineContent":[{"identifier":"screenshot_mobile_invitation_01.png","type":"image"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Joyned supports adding a new Offering only via the hosted UI.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Once a user taps on the relevent button the mobile SDK asks its host application for the offering information via a delegation protocol and processes it accordingly."}]},{"inlineContent":[{"text":"The delegation protocol in question is the ","type":"text"},{"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedButtonDelegate","type":"reference","isActive":true},{"type":"text","text":" you will need to"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"The button delegate protocol covers three diffrent situations :","type":"text"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Standalone","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Table \/ Collection view","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}],"size":3}],"type":"row"},{"inlineContent":[{"inlineContent":[{"text":"Standalone example:","type":"text"}],"type":"strong"}],"type":"paragraph"},{"code":["import Foundation","import UIKit","","import JoynedMobileSDK","","class StandaloneViewController : UIViewController","{","    \/\/ MARK: - Properties","    internal var joynedButton : JoynedButton! {","        didSet { joynedButton.delegate = self }","    }","    internal var venue : Venue!","","    \/\/ MARK: - View LifeCycle","    override func viewDidLoad()","    {","        super.viewDidLoad()","        ","        joynedButton = JoynedSDK.generateJoynedButton(frame: CGRect(x: 100, y: 500, width: 70, height: 34), with: self)","        view.addSubview(button)","    }","}","extension StandaloneViewController : JoynedButtonDelegate","{","    func willPresentMobileSDKContent()","    {","        logger.debug()","    }","    ","    func joynedButton(_ button: JoynedButton, productOfferingFor location: CGPoint) -> JoynedOfferingRequest?","    {","        logger.debug()","        return encode(product: venue)","    }","    ","    private func encode(product item: Venue?) -> JoynedOfferingRequest?","    {","        guard let venue   = item              else { return nil }","        guard let product = venue.toPayload() else { return nil }","        guard let extra   = venue.toJSON()    else { return nil }","        return JoynedOfferingRequest(offeringString: product, extraString: extra)","    }","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Table \/ Collection example:"}]}]},{"syntax":"swift","type":"codeListing","code":["import Foundation","import UIKit","","import JoynedMobileSDK","","class GroupViewController : UIViewController","{","    \/\/ MARK: - type - enum","    struct Constants","    {","        struct Identifier","        {","            private init() {}","        }","        private init() {}","    }","    ","    \/\/ MARK: - Properties","    private var selectedItem : Venue?","    ","    \/\/ MARK: - Properties","    private var dataSource : UICollectionViewDiffableDataSource<Int, Venue>!","    ","    \/\/ MARK: - @IBOutlet","    @IBOutlet      var  logoImageView : UIImageView!","    @IBOutlet weak var collectionView : UICollectionView! {","        didSet {","            collectionView.delegate = self","        }","    }","    ","    \/\/ MARK: - View LifeCycle","    override func viewDidLoad()","    {","        super.viewDidLoad()","        \/\/ Do any additional setup after loading the view.","        ","        title = String()","        navigationItem.titleView = logoImageView","        navigationItem.setHidesBackButton(true, animated: false)","        ","        registerVisualElements()","        configureVisualElements()","    }","}","\/\/ MARK: - Constants","fileprivate extension GroupViewController.Constants.Identifier","{","    static var   cell : String { \"DealsFeedCellIdentifier\"   }","    static var header : String { \"DealsFeedHeaderIdentifier\" }","    static var global : String { \"SearchHeaderIdentifier\"    }","}","\/\/ MARK: - Collection View setup","fileprivate extension GroupViewController","{","    private func registerVisualElements()","    {","        collectionView.register(ProductCollectionViewCell.classNib, forCellWithReuseIdentifier: Constants.Identifier.cell)","        collectionView.register(SearchHeaderView.classNib         , forSupplementaryViewOfKind: Constants.Identifier.global, withReuseIdentifier: Constants.Identifier.global)","    }","    private func configureVisualElements()","    {","        ","        dataSource = UICollectionViewDiffableDataSource<Int, Venue>(collectionView: collectionView) { (collectionView, indexPath, item) -> UICollectionViewCell? in","            ","            let cell = collectionView.dequeueReusableCell(withReuseIdentifier: Constants.Identifier.cell, for: indexPath)","            ","            if let cell = cell as? ProductCollectionViewCell","            {","                cell.titleLabel.text        = item.productTitle","                cell.datesLabel.text        = \"\\(item.productDates.checkin) - \\(item.productDates.checkout)\"","                cell.descriptionLabel.text  = item.productDescription","                cell.locationLabel.text     = nil","                cell.priceLabel.text        = \"\\(item.productPrice.amount) \\(item.productPrice.currency)\"","                cell.imageView.image        = UIImage(named: item.productThumbnail)","                cell.joynedButton.delegate  = self","            }","            ","            return cell","        }","        dataSource?.supplementaryViewProvider = { (collectionView,kind,indexPath) -> UICollectionReusableView? in","            ","            guard kind == Constants.Identifier.global else { return nil }","            return collectionView.dequeueReusableSupplementaryView(","                ofKind: kind,","                withReuseIdentifier: Constants.Identifier.global,","                for: indexPath","            )","        }","    }","}","extension GroupViewController : JoynedButtonDelegate","{","    func willPresentMobileSDKContent()","    {","        logger.debug()","    }","    ","    func joynedButton(_ button: JoynedButton, productOfferingForItem indexPath: IndexPath) -> JoynedOfferingRequest?","    {","        return encode(product: dataSource.itemIdentifier(for: indexPath))","    }","    ","    private func encode(product item: Venue?) -> JoynedOfferingRequest?","    {","        guard let venue   = item              else { return nil }","        guard let product = venue.toPayload() else { return nil }","        guard let extra   = venue.toJSON()    else { return nil }","        \/\/ let extra: [String: Any] = [","        \/\/     \"itemLink\": \"https:\/\/voyage.joyned.app\/product\/1\",","        \/\/ ]","        return JoynedOfferingRequest(offeringString: product, extraString: extra)","    }","}",""]}],"title":"Add offering"},{"title":"Respond to offering","content":[{"level":3,"anchor":"In-App-navigation-in-response-to-user-action","text":"In-App navigation in response to user action","type":"heading"},{"inlineContent":[{"text":"To support in-app navigation ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Joyned mobile sdk"}]},{"text":"  exposes a delegation method via its public accessd class.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"When user taps on an offering within the floating container the system extracts it’s data , wrapps it into a rsponse object and calls on its delegate object with the "},{"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate\/mobileSDKDidTriggerNavigation(for:)","isActive":true,"type":"reference"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Note:"}],"type":"strong"},{"text":"","type":"text"},{"text":" ","type":"text"},{"text":"This is the only required method in the ","type":"text"},{"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate","type":"reference","isActive":true},{"text":" protocol.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"In-app navigation example:","type":"text"}]}]},{"syntax":"swift","type":"codeListing","code":["func mobileSDKDidTriggerNavigation(for navigationPayload: JoynedMobileSDK.JoynedOfferingResponse)","{","    logger.debug()","    guard let targetUrl = navigationPayload.directUrl      else { return }","    guard let keyWindow = UIApplication.shared.v_keyWindow else { return }","    ","    if let topVC = keyWindow.v_topViewController {","        topVC.tabBarController?.selectedIndex = 0","    }","    ","    if let topVC = keyWindow.v_topViewController {","        topVC.navigationController?.popToRootViewController(animated: true)","    }","    ","    guard let vc = keyWindow.v_topViewController             else { return }","    guard let dealsVC = vc as? DealsFeedViewController       else { return }","    guard let item = DataService.shared.item(for: targetUrl) else { return }","    ","    dealsVC.present(selected: item)","    ","    JoynedSDK.minimizeDisplay()","}"]}]}],"type":"tabNavigator"}]}],"sections":[],"hierarchy":{"paths":[["doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/GettingStarted"]]},"metadata":{"title":"Offering handling API","roleHeading":"Article","role":"article"},"abstract":[{"text":"API for interacting with JoynedMobileSDK offerings","type":"text"}],"kind":"article","schemaVersion":{"major":0,"patch":0,"minor":3},"references":{"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedButtonDelegate":{"navigatorTitle":[{"kind":"identifier","text":"JoynedButtonDelegate"}],"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedButtonDelegate","type":"topic","title":"JoynedButtonDelegate","role":"symbol","url":"\/documentation\/joynedmobilesdk\/joynedbuttondelegate","abstract":[],"kind":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"JoynedButtonDelegate"}]},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/GettingStarted":{"abstract":[],"type":"topic","kind":"article","role":"collection","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/GettingStarted","url":"\/documentation\/gettingstarted","title":"Getting Started with Joyned mobile SDK"},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedSDKDelegate/mobileSDKDidTriggerNavigation(for:)":{"navigatorTitle":[{"kind":"identifier","text":"mobileSDKDidTriggerNavigationFor:"}],"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate\/mobileSDKDidTriggerNavigation(for:)","type":"topic","title":"mobileSDKDidTriggerNavigation(for:)","role":"symbol","url":"\/documentation\/joynedmobilesdk\/joynedsdkdelegate\/mobilesdkdidtriggernavigation(for:)","abstract":[{"type":"text","text":"Called when a user clicks on an offering within the Joyned UI, use this as a trigger for in-app navigation, for navigation details lokk into the payload object"}],"kind":"symbol","required":true,"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"mobileSDKDidTriggerNavigation"},{"text":"(","kind":"text"},{"text":"for","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"JoynedOfferingResponse","kind":"typeIdentifier","preciseIdentifier":"c:@M@JoynedMobileSDK@objc(cs)JoynedOfferingResponse"},{"text":")","kind":"text"}]},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedSDKDelegate":{"navigatorTitle":[{"text":"JoynedSDKDelegate","kind":"identifier"}],"identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedSDKDelegate","type":"topic","title":"JoynedSDKDelegate","role":"symbol","url":"\/documentation\/joynedmobilesdk\/joynedsdkdelegate","abstract":[{"text":"Implement this to recive notifications on major actions taken by the SDK and affect its behavior","type":"text"}],"kind":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"JoynedSDKDelegate","kind":"identifier"}]},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedOfferingResponse":{"type":"topic","title":"JoynedOfferingResponse","abstract":[],"kind":"symbol","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingResponse","role":"symbol","url":"\/documentation\/joynedmobilesdk\/joynedofferingresponse","fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"kind":"identifier","text":"JoynedOfferingResponse"}],"navigatorTitle":[{"kind":"identifier","text":"JoynedOfferingResponse"}]},"doc://co.joyned.mobile.JoynedMobileSDK/documentation/JoynedMobileSDK/JoynedOfferingRequest":{"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"text":"JoynedOfferingRequest","kind":"identifier"}],"role":"symbol","url":"\/documentation\/joynedmobilesdk\/joynedofferingrequest","title":"JoynedOfferingRequest","type":"topic","identifier":"doc:\/\/co.joyned.mobile.JoynedMobileSDK\/documentation\/JoynedMobileSDK\/JoynedOfferingRequest","navigatorTitle":[{"text":"JoynedOfferingRequest","kind":"identifier"}],"kind":"symbol","abstract":[]},"screenshot_mobile_invitation_01.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/screenshot_mobile_invitation_01.png"}],"type":"image","alt":"Joyned invitation mobile example 01","identifier":"screenshot_mobile_invitation_01.png"}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"op":"replace","value":"JoynedButtonDelegate","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedButtonDelegate\/title"},{"op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedButtonDelegate\/fragments","value":[{"kind":"identifier","text":"JoynedButtonDelegate"}]},{"op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate~1mobileSDKDidTriggerNavigation(for:)\/title","value":"mobileSDKDidTriggerNavigationFor:"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate~1mobileSDKDidTriggerNavigation(for:)\/fragments","value":[{"text":"- ","kind":"text"},{"text":"mobileSDKDidTriggerNavigationFor:","kind":"identifier"}],"op":"replace"},{"op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate\/title","value":"JoynedSDKDelegate"},{"op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedSDKDelegate\/fragments","value":[{"kind":"identifier","text":"JoynedSDKDelegate"}]},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingResponse\/title","value":"JoynedOfferingResponse","op":"replace"},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingResponse\/fragments","op":"replace","value":[{"kind":"identifier","text":"JoynedOfferingResponse"}]},{"path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingRequest\/title","value":"JoynedOfferingRequest","op":"replace"},{"value":[{"text":"JoynedOfferingRequest","kind":"identifier"}],"op":"replace","path":"\/references\/doc:~1~1co.joyned.mobile.JoynedMobileSDK~1documentation~1JoynedMobileSDK~1JoynedOfferingRequest\/fragments"}]}]}